<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>http://meteo-pl.herokuapp.com</title>
	<link rel="stylesheet" type="text/css" href="/static/styles.css" />
	<link rel="stylesheet" type="text/css" href="/static/sticky-footer.css" />
</head>

<div id="wrap">
	<div id="main">			

<script>
// http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values
function getParameterByName(str, name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(str);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

if (localStorage.configured) {
	document.write("<p>Previously set parameters:" );
	document.write("<p>model = "+localStorage.model );
	document.write("<p>row = "+localStorage.row );
	document.write("<p>col = "+localStorage.col );
	document.write("<p>Click <a href='/index.html'>here</a> to go back to forecast." );
}

function parseUrl() {
	var str = document.getElementById("url").value;
	document.getElementById("row").value = getParameterByName(str,"row");
	document.getElementById("col").value = getParameterByName(str,"col");
	document.getElementById("model").selectedIndex = (str.indexOf("/um/") !== -1)?0:1;
}

</script>

<form action="index.html" method="get">
	<label>Model</label>
	<select id="model" name="model">
		<option value="um">UM
		<option value="coamps">COAMPS
	</select>
	
	<label>Row</label>
	<input id="row" placeholder="Row" name="row" type="number">
	
	<label>Col</label>
	<input id="col" placeholder="Col" name="col" type="number">
	
	<input type=submit value="Save">

	Or paste forecast url and click "parse":
	<input id="url" type="url" placeholder="Forecast url, eg. http://www.meteo.pl/um/php/meteorogram_list.php?ntype=0u&fdate=2013071500&row=418&col=223&lang=pl&cname=%A3%F3d%BC">
	<input type=button value="Parse" onclick="parseUrl();">
</form>

	</div>
</div>

<div id="footer">
	Footer
</div>
